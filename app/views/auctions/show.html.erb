<script>
    // get value of the remaining time
    remaining = <%= @auction.time_remaining %>;
    // update the output for the remaining time
    updateOutput(remaining);
    // set the oage to refresh when the auction finishes (= when remaining time runs out)
    if (remaining>0) refreshPageIn(remaining);
</script>
<div class="col-lg-9 col-md-9 col-sm-7 col-xs-12">
    <h1><%= fa_icon "car" %> <%= @auction.title %></h1>
    <hr>
    <h2><strong><%= fa_icon "clock-o" %> <span id="countdown"><script>document.write(result)</script></span></strong></h2>
    <p>Time remaining</p>
    <hr>
    <p>
        <strong>Seller:</strong>
        <%= if @auction.user == @current_user then "you" else @auction.user.username end %>
    </p>
    <p>
        <strong>Description:</strong></p>
    <p>
        <%= @auction.description %>
    </p>
    <p><strong>Pictures:</strong></p>
    <p>
        <% @images.each do |image| %>
            <%= image_tag image.thumbnail_uri, size: "#{image.thumbnail_width}x#{image.thumbnail_height}" %>
        <% end %>
    </p>
    <p><strong>Related tweets:</strong></p>
    <%= render partial: 'tweet', collection: @tweets %>
    <hr>
</div>
<div class="col-lg-3 col-md-3 col-sm-5 col-xs-12 text-right">
    <h1><%= fa_icon "gavel" %></h1>
    <hr>
    <h2>
        <strong><%= number_with_delimiter(@auction.price.round, delimiter: "'") %> CHF</strong>
    </h2>
    <p>
        <%= @auction.running? ? (@auction.bids.empty? ? "Starting" : "Current") : "Final" %> bid
        <%= @bidder.nil? ? '' : ('by '+ (@bidder.eql?(current_user) ? "you" : @bidder.username)) %>
    </p>
    <hr>
    <% unless is_own_auction? or !@auction.running? %>
        <%= render "bids/form" %>
    <% end %>
    <% if is_own_auction? %>
        <div style="float: right; width: auto;">
            <%= if (is_own_auction? and @auction.bids.first.nil?) then button_to 'Delete', auction_path(@auction), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" end %>
        </div>
        <div style="float: right; width: auto;">
            <p>&nbsp;</p>
        </div>
        <div style="float: right; width: auto;">
            <%= if is_own_auction? then button_to 'Edit', edit_auction_path(@auction), :method => "get", class: "btn btn-warning" end %>
        </div>
    <% end %>
</div>
<% unless !@auction.running? %>
<div class="col-lg-3 col-md-3 col-sm-5 col-xs-12 text-right">
    <hr>
</div>
<% end %>