<h1>All Auctions</h1>
<%= form_tag(auctions_path, :method => "get", id: "search-form") do %>
    <%= text_field_tag :search, params[:search], placeholder: "Search Auctions" %>
    <%= submit_tag "Search", :name => nil %>
<% end %>

<%= link_to 'New auction', new_auction_path %>
<table>
    <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Price</th>
        <th>Owner</th>
        <th colspan="3"></th>
    </tr>

    <% @auctions.each do |auction| %>
        <tr>
            <td><%= auction.title %></td>
            <td><%= auction.description %></td>
            <td><%= auction.price %></td>
            <td><%= auction.user.username %></td>

            <td><%= link_to 'Show', auction_path(auction) %></td>
            <td><%= if auction.user == @current_user then link_to 'Edit', edit_auction_path(auction) end %></td>
            <td><%= if (auction.user == @current_user and auction.bids.first.nil?) then link_to 'Destroy', auction_path(auction), method: :delete, data: { confirm: 'Are you sure?' } end %></td>
        </tr>
    <% end %>
</table>
